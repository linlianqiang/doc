## 组件设计

#### 设计思想

设计的意义：

* 数据结构化。
* 从简单到抽象。
* 继承，封装，多态。

S O L I D 五大设计原则：

* 单一职责原则：复杂功能拆分
* 开放封闭原则：对扩展开放，对修改封闭。新需求应该是新增代码，不是修改原有代码。
* 李氏置换原则：子类能覆盖父类，父类能出现对应子类就能出现。？
* 接口独立原则：保持接口的单一独立
* 依赖倒置原则：面向接口编程，依赖于抽象，而不依赖于具体

模式遵循于设计，有创建型，结构型，行为型。编码时，多思考，尽量模仿，刻意训练。理解其用意。

#### 如何设计

组件设计需考虑哪些方面：

* 如何设计数据？
  * 用数据描述所有的内容
  * 尽量结构化，便于扩展；层级不要太深，造成性能
* 父子组件如何通信？

如何设计组件：

* 从功能上拆分层次，通过UML类图的方式，来展示组件树（包含state，Methods，props, 与其他组件的关系）。

* 组件原子化，尽量让组件只做一件事。（业务功能可以很复杂，但组件很简单）

* 容器组件：只操作数据。

* UI组件：只负责视图，交互。所以通常容器组件是最外层，负责给UI组件传递数据。

* 对组件的设计应更采用扁平化的数据，一目了然，性能也有可能受到影响。

  ```js
  // 不建议
  <listItem customer={customer}>
  // 一目了然
  <listItem phone={customer.phone} name={customer.name} iNumber={customer.iNumber}>
  ```

* 更加纯粹的state变化：一个state应该只被一个事件（computed）响应，或者一个事件或变化不应对别的state变化做出响应。
* 松耦合，复用。考虑更加通用的场景。

##### 如何设计一个业务组件
 * 命名要直观： 业务+组件风格。 如购物车；ShoppingCarList
   * 封装业务组件或者基础组件，如果不能给这个组件起一个有意义的名字，证明这个组件承担的职责可能不够单一，需要继续抽组件，直到它可以是一个独立的组件即可. 单一功能原则
 * 注释要规范。
 * 参数尽可能少，组件库需要应付大量的场景，所以api多。而我们自己的业务组件参数尽可能少，甚至可以没有。
 * 提供slot
 * 子组件本身不要生成数据，如果需要生成，只在内部使用。
 * 在父组件中处理事件。
  ```js
  // 子组件
  emit('change', val)

  // 父组件
  <child @change="changeUpload" />
  ```
  * 
